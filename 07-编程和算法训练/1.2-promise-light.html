<style>
  div {
    background-color: grey;
    display: inline-block;
    margin: 30px;
    width: 200px;
    height: 200px;
    border-radius: 50%;
  }
  .yellow.light {
    background-color: yellow;
  }
  .red.light {
    background-color: red;
  }
  .green.light {
    background-color: green;
  }
</style>

<div class="red"></div>
<div class="yellow"></div>
<div class="green"></div>

<script>
  let lights = document.querySelectorAll('div');
  let red = document.querySelector('.red');
  let yellow = document.querySelector('.yellow');
  let green = document.querySelector('.green');

  function sleep(ms) {
    return new Promise((resolve) =>
      setTimeout(() => {
        resolve();
      }, ms),
    );
  }

  function extinguishAll() {
    lights.forEach((light) => light.classList.remove('light'));
  }

  function redLightUp() {
    extinguishAll();
    red.classList.add('light');
  }

  function yellowLightUp() {
    extinguishAll();
    yellow.classList.add('light');
  }

  function greenLightUp() {
    extinguishAll();
    green.classList.add('light');
  }

  function go() {
    greenLightUp();
    sleep(5000)
      .then(() => {
        yellowLightUp();
        return sleep(2000);
      })
      .then(() => {
        redLightUp();
        return sleep(3000);
      })
      .then(() => {
        go();
      });
  }
</script>
